#!/bin/sh

if ! type tmux > /dev/null 2>&1; then
    echo 'tmux is not available.' >&2
    exit
fi
if [ -n "$TMUX" ]; then
    echo 'already in tmux session.' >&2
    exit
fi

if tmux has-session 2> /dev/null; then
    tmux attach
else
    readonly config="${XDG_CONFIG_HOME:-~/.config}/tmux/tmux.conf"
    if [ -e "$config" ]; then
        tmux -f "$config" new
    else
        tmux new
    fi
fi
